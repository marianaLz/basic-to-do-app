(window["webpackJsonpbasic-to-do"]=window["webpackJsonpbasic-to-do"]||[]).push([[0],{40:function(e,t,a){e.exports=a(71)},45:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),s=a.n(c);a(45),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(6),u=a(8),l=a(12),o=a(9),m=a(10),k=a(38),d=a(32),p=a(39),f=Object(n.createContext)(),E=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(k.a)(this,Object(d.a)(t).call(this))).setTasks=function(t){var a=e.state.tasks;a=Array.isArray(t)?[].concat(Object(l.a)(a),Object(l.a)(t)):[].concat(Object(l.a)(a),[t]),e.setState({tasks:a})},e.onEditTask=function(t,a){var n=e.state.tasks;n.splice(t,1,a),e.setState({tasks:n})},e.setTaskToEdit=function(t){e.setState({form:t},(function(){return console.log(e.state)}))},e.removeTask=function(t){var a=e.state.tasks;a=a.filter((function(e){return e._id!==t})),e.setState({tasks:a})},e.login=function(t){e.setState({user:t})},e.logout=function(){return e.setState({user:null,tasks:[]})},e.state={user:JSON.parse(localStorage.getItem("USER")),tasks:[],form:{}},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=this.login,a=this.logout,n=this.setTasks,c=this.removeTask,s=this.setTaskToEdit,i=this.onEditTask;return r.a.createElement(f.Provider,{value:{state:e,login:t,logout:a,setTasks:n,removeTask:c,setTaskToEdit:s,onEditTask:i}},this.props.children)}}]),t}(n.Component),v=a(14),g=a.n(v),h="https://basic-to-do-app.herokuapp.com",b=function(){function e(){Object(o.a)(this,e),this.service=g.a.create({baseURL:h,withCredentials:!0})}return Object(m.a)(e,[{key:"signup",value:function(e){return this.service.post("/api/signup",e)}},{key:"login",value:function(e){return this.service.post("/api/login",e)}},{key:"logout",value:function(){return this.service.post("/api/logout")}},{key:"loggedin",value:function(){return this.service.get("/api/loggedin")}}]),e}(),N=function(){var e=new b,t=Object(n.useContext)(f).logout,a=function(){e.logout().then((function(){t(),localStorage.clear()})).catch((function(e){console.log(e)}))};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(f.Consumer,null,(function(e){return e.state.user?r.a.createElement("nav",{className:"uk-navbar-container","uk-navbar":"true"},r.a.createElement("div",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",null,r.a.createElement(i.c,{exact:!0,to:"/",onClick:a},"Logout"))))):r.a.createElement("nav",{className:"uk-navbar-container","uk-navbar":"true"},r.a.createElement("div",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",null,r.a.createElement(i.c,{exact:!0,to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(i.c,{exact:!0,to:"/signup"},"Signup")))))}))))},O=a(7),y=a(20);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var w=function(){var e=Object(n.useState)({}),t=Object(O.a)(e,2),a=t[0],r=t[1];return[a,function(e){e.persist(),r((function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,Object(y.a)({},e.target.name,e.target.value))}))},r]},x=a(35),j=a.n(x),S=function(e){var t=Object(n.useContext)(f),a=t.login,c=t.state.user,s=new b,u=w(),l=Object(O.a)(u,2),o=l[0],m=l[1];Object(n.useEffect)((function(){c&&e.history.push("/")}),[c]);return r.a.createElement("div",{className:"uk-flex uk-flex-center uk-align-center"},r.a.createElement("div",null,r.a.createElement("div",{className:"uk-margin-large-top uk-text-center uk-card uk-card-default uk-card-body"},r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:" uk-margin"},r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: user"}),r.a.createElement("input",{type:"text",name:"username",placeholder:"User",onChange:m,className:"uk-input uk-form-width-medium"}))),r.a.createElement("div",{className:" uk-margin"},r.a.createElement("div",{className:"uk-inline uk-margin"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: lock"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:m,className:"uk-input uk-form-width-medium"}))),r.a.createElement("button",{className:"uk-button uk-button-primary",onClick:function(){s.login(o).then((function(t){t.data.message?j()({title:"Oops...",text:"Something went wrong authenticating user",icon:"error",dangerMode:!0,timer:3e3,button:!1}):(localStorage.setItem("USER",JSON.stringify(t.data)),a(t.data),e.history.push("/"))}))}},"Login"),r.a.createElement("p",null,"Don't have an account yet?",r.a.createElement(i.b,{to:"/signup"}," Signup")))))},C=function(e){var t=Object(n.useContext)(f).login,a=new b,c=w(),s=Object(O.a)(c,2),u=s[0],l=s[1];return r.a.createElement("div",{className:"uk-flex uk-flex-center uk-align-center"},r.a.createElement("div",null,r.a.createElement("div",{className:"uk-margin-large-top uk-text-center uk-card uk-card-default uk-card-body"},r.a.createElement("h2",null,"Signup"),r.a.createElement("div",{className:" uk-margin"},r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: user"}),r.a.createElement("input",{type:"text",name:"username",placeholder:"User",onChange:l,className:"uk-input uk-form-width-medium"}))),r.a.createElement("div",{className:" uk-margin"},r.a.createElement("div",{className:"uk-inline uk-margin"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: lock"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:l,className:"uk-input uk-form-width-medium",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",required:!0}))),r.a.createElement("button",{className:"uk-button uk-button-primary",onClick:function(){a.signup(u).then((function(a){t(a.data),localStorage.setItem("USER",JSON.stringify(a.data)),e.history.push("/")})).catch((function(e){console.log(e)}))}},"Signup"),r.a.createElement("p",null,"Do you already have an account?",r.a.createElement(i.b,{to:"/login"}," Login")))))},P="https://basic-to-do-app.herokuapp.com",U=function(){function e(){Object(o.a)(this,e),this.service=g.a.create({baseURL:P,withCredentials:!0})}return Object(m.a)(e,[{key:"allTasks",value:function(e){return this.service.get("/api/tasks",e)}},{key:"createTasks",value:function(e){return this.service.post("/api/tasks/create",e)}},{key:"editTasks",value:function(e,t){return this.service.post("/api/tasks/edit/".concat(e),t)}},{key:"deleteTasks",value:function(e){return this.service.post("/api/tasks/delete/".concat(e))}}]),e}(),I=function(e){var t=e.title,a=e.description,n=e.deleteTask,c=e.setTaskToEdit;return r.a.createElement("div",{className:"uk-card uk-card-default uk-margin"},r.a.createElement("div",{className:"uk-card-body uk-padding-small"},r.a.createElement("h3",{className:"uk-margin-remove"},t),r.a.createElement("p",{className:"uk-margin-remove"},a)),r.a.createElement("div",{className:"uk-card-footer"},r.a.createElement("div",{className:"uk-flex uk-flex-right"},r.a.createElement("div",{className:"uk-width-2-5 uk-flex uk-flex-around"},r.a.createElement("a",{className:"uk-button uk-button-text",href:"#",onClick:c},r.a.createElement("span",{"uk-icon":"icon: pencil; ratio:0.7"})," Edit"),r.a.createElement("a",{className:"uk-button uk-button-text",href:"#",onClick:n},r.a.createElement("span",{"uk-icon":"icon: trash; ratio:0.7"})," delete")))))},L=function(e){var t=e.tasks,a=e.deleteTask,n=e.setTaskToEdit;return r.a.createElement("div",{className:"uk-flex uk-flex-center"},r.a.createElement("div",{className:"uk-width-2-3"},t.map((function(e,t){return r.a.createElement(I,Object.assign({deleteTask:function(){return a(e._id)},setTaskToEdit:function(){return n(e)},key:t},e))}))))},_=function(e){var t=e.handleInputs,a=e.createTask,n=e.title,c=void 0===n?"":n,s=e._id,i=e.description,u=void 0===i?"":i,l=e.editTask;return r.a.createElement("div",{className:"uk-flex uk-flex-center uk-align-center"},r.a.createElement("div",null,r.a.createElement("div",{className:"uk-margin-large-top uk-text-center uk-card uk-card-default uk-card-body"},r.a.createElement("h2",null,"Add task"),r.a.createElement("div",{className:" uk-margin"},r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: calendar"}),r.a.createElement("input",{type:"text",name:"title",placeholder:"Task title",onChange:t,value:c,className:"uk-input uk-form-width-large"}))),r.a.createElement("div",{className:" uk-margin"},r.a.createElement("div",{className:"uk-inline uk-margin"},r.a.createElement("textarea",{type:"text",name:"description",value:u,placeholder:"Enter a description",onChange:t,className:"uk-textarea uk-form-width-large"}))),r.a.createElement("button",{className:"uk-button uk-button-primary",onClick:s?l:a}," ",s?"Edit":"add"," Task"))))},D=function(e){var t=Object(n.useContext)(f),a=t.setTasks,c=t.removeTask,s=t.setTaskToEdit,i=t.onEditTask,u=t.state,o=u.user,m=u.tasks,k=u.form,d=w(),p=Object(O.a)(d,3),E=p[0],v=p[1],g=p[2],h=new U;Object(n.useEffect)((function(){o?h.allTasks().then((function(e){var t=e.data;a(Object(l.a)(t))})):e.history.push("/login")}),[o]),Object(n.useEffect)((function(){g(k)}),[k]);var b=function(e){h.editTasks(e,E).then((function(e){var t=e.data,a=m.findIndex((function(e){return e._id===t._id}));i(a,t)}))};return o?r.a.createElement("div",{className:"uk-flex uk-flex-around"},r.a.createElement("div",{className:"uk-width-1-2"},r.a.createElement("h1",{className:"uk-margin-large-top uk-text-center"},"Welcome ",o.username,"!"),r.a.createElement("h3",{className:"uk-text-center"},"Your tasks list is here:"),r.a.createElement(L,{tasks:m,editTask:b,deleteTask:function(e){h.deleteTasks(e).then((function(e){c(e.data._id)}))},setTaskToEdit:s})),r.a.createElement("div",{className:"uk-width-1-2"},r.a.createElement(_,Object.assign({},E,{createTask:function(){h.createTasks(E).then((function(e){var t=e.data;a(t)}))},handleInputs:v,editTask:function(){return b(E._id)}})))):r.a.createElement("p",null,"Unauthorized...")},J=function(){return r.a.createElement(i.a,null,r.a.createElement(N,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/login",component:S}),r.a.createElement(u.a,{exact:!0,path:"/signup",component:C}),r.a.createElement(u.a,{exact:!0,path:"/",component:D})))},R=a(36),A=a.n(R),W=a(37),z=a.n(W);a(70);A.a.use(z.a),s.a.render(r.a.createElement(E,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.c1176087.chunk.js.map